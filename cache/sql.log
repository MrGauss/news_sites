2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Новини';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Життя міста';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Суспільство';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Події';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Мерія';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Війна на сході';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Спорт';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Політика';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Райони';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Поліція';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Військомат';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Особистість';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Свято';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Екологія';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Економіка';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Погода';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Релігія';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Культура';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Освіта';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Наука';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) as count FROM tags WHERE name='Медицина';
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/vnochi-v-umani-stalasya-smertelna-pozhezha/%' OR title ='Вночі в Умані сталася смертельна пожежа' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/terpecz-urvavsya-dva-nezakryti-kanalizaczijni-lyuky-u-kanevi-zasypaly-piskom/%' OR title ='Терпець урвався: два незакриті каналізаційні люки у Каневі засипали піском' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/gore-parkuvalnyky-peregorodyly-zupynku-u-czentri-cherkas-foto/%' OR title ='Горе-паркувальники перегородили зупинку у центрі Черкас' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/krayeznavecz-z-sela-stari-babany-znyav-film-pro-golodomor-na-umanshhyni-video/%' OR title ='Краєзнавець з села Старі Бабани зняв фільм про Голодомор на Уманщині' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/lysyanski-pravoohoronczi-vstanovyly-susida-grabizhnyka/%' OR title ='Лисянські правоохоронці встановили сусіда-грабіжника' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/ne-mozhna-zabuty-v-cherkasah-vshanuvaly-zhertv-golodomoriv-foto/%' OR title ='Не можна забути: в Черкасах вшанували жертв Голодоморів' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/gorodyshhenski-pravoohoronczi-provely-lekcziyu-dlya-studentiv/%' OR title ='Городищенські правоохоронці провели лекцію для студентів' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/tragichni-storinky-5-knyg-pro-golodomor-shho-yih-maye-prochytaty-kozhen/%' OR title ='Трагічні сторінки: 5 книг про Голодомор, що їх має прочитати кожен' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/golodomor-zminyv-ukrayinsku-nacziyu-na-zavzhdy/%' OR title ='Голодомор змінив українську націю на завжди' ;
--------------------------------
2019.11.23 19:15:01:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://dzvin.media/news/czentr-obslugovuvannya-spozhyvachiv-cherkaskoyi-tecz-zminyv-svoyu-adresu/%' OR title ='Центр обслуговування споживачів Черкаської ТЕЦ змінив свою адресу' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/mixajlyuk-vstanoviv-novij-osobistij-rekord-u-nba/%' OR title ='Михайлюк встановив новий особистий рекорд у НБА' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/u-cherkasax-dvoye-pensionerok-sudyatsya-za-odnu-kvartiru-video/%' OR title ='У Черкасах двоє пенсіонерок судяться за одну квартиру' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/na-cherkashhini-policejski-rozkrili-zhorstoke-vbivstvo-90-richnogo-pensionera/%' OR title ='На Черкащині поліцейські розкрили жорстоке вбивство 90-річного пенсіонера' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/v-umani-pid-chas-pozhezhi-zaginuv-cholovik/%' OR title ='В Умані під час пожежі загинув чоловік' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/batku-cherkaskogo-nardepa-prinesli-zemlyu/%' OR title ='У Черкасах привезли землю до “Бочки”' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/sinoptiki-pro-pogodu-u-vixidni-v-nedilyu-stane-teplishe/%' OR title ='Синоптики про погоду у вихідні: в неділю стане тепліше' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/u-cherkasax-vshanovuyut-zhertv-golodomoru-mistyan-zaklikayut-zapaliti-svichku-pamyati/%' OR title ='У Черкасах вшановують жертв Голодомору. Містян закликають запалити свічку пам’яті' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/tabloid/cherkaskij-deputat-znyavsya-u-romantichnij-fotosesi%d1%97-foto/%' OR title ='Черкаський депутат знявся у романтичній фотосесії' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/u-cherkasax-onovili-osvitlennya-na-shhe-odnij-vulici/%' OR title ='У Черкасах оновили освітлення на ще одній вулиці' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/miska-rada-oskarzhila-ponovlennya-na-posadi-skandalnogo-chinovnika/%' OR title ='Міська рада оскаржила поновлення на посаді скандального чиновника' ;
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT COUNT(id) as count FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/u-cherkasax-dvoye-pensionerok-sudyatsya-za-odnu-kvartiru-video/%' OR title = 'У Черкасах двоє пенсіонерок судяться за одну квартиру';
--------------------------------
2019.11.23 19:15:02:
--------------------------------
SELECT COUNT(id) as count FROM posts WHERE comment LIKE 'https://18000.com.ua/strichka-novin/v-umani-pid-chas-pozhezhi-zaginuv-cholovik/%' OR title = 'В Умані під час пожежі загинув чоловік';
--------------------------------
2019.11.23 19:15:03:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/22/uvaha-vidbulysia-zminy-u-sferi-derzhavnoi-reiestratsii-prav-ta-reiestratsii-biznesu/%' OR title ='Увага! Відбулися зміни у сфері державної реєстрації прав та реєстрації бізнесу' ;
--------------------------------
2019.11.23 19:15:03:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/21/iz-zasidannia-vykonavchoho-komitetu/%' OR title ='Із засідання виконавчого комітету' ;
--------------------------------
2019.11.23 19:15:04:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/21/den-hidnosti-ta-svobody-vidznachyly-u-shpolianskij-hromadi/%' OR title ='День Гідності та Свободи відзначили у Шполянській громаді' ;
--------------------------------
2019.11.23 19:15:04:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/21/proiekty-rishen-vykonkomu-vid-20-11-2019/%' OR title ='Проєкти рішень виконкому від 20.11.2019' ;
--------------------------------
2019.11.23 19:15:04:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/21/21-lystopada-den-hidnosti-ta-svobody-ukrainy-2/%' OR title ='21 листопада — День Гідності та Свободи України' ;
--------------------------------
2019.11.23 19:15:04:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/20/kontejnery-dlia-vidpratsovanykh-batarejok-z-iavylys-u-shkolakh-sil-lebedyn-ta-krymky-foto/%' OR title ='Контейнери для відпрацьованих батарейок з’явились у школах сіл Лебедин та Кримки' ;
--------------------------------
2019.11.23 19:15:04:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/20/kulturno-osvitnia-poizdka-do-polshchi-shvetsii-norvehii-ta-danii/%' OR title ='Культурно-освітня поїздка до Польщі, Швеції, Норвегії та Данії' ;
--------------------------------
2019.11.23 19:15:04:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/20/asotsiatsiia-natsionalno-patriotychnykh-orhanizatsij-informuie/%' OR title ='Асоціація національно-патріотичних організацій інформує' ;
--------------------------------
2019.11.23 19:15:05:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/20/do-uvahy/%' OR title ='До уваги!' ;
--------------------------------
2019.11.23 19:15:05:
--------------------------------
SELECT count(id) FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/19/zaklady-osvity-ta-medytsyny-u-selakh-remontuiut/%' OR title ='Заклади освіти та медицини у селах ремонтують' ;
--------------------------------
2019.11.23 19:15:06:
--------------------------------
SELECT COUNT(id) as count FROM posts WHERE comment LIKE 'http://shpola-otg.gov.ua/2019/11/21/iz-zasidannia-vykonavchoho-komitetu/%' OR title = 'Із засідання виконавчого комітету';
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.posted = 1 AND
	posts.id = 580 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.posted = 1 AND
	posts.id = 580 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (580) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT * FROM categories ORDER BY level;  -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------

            SELECT
                posts.id,
                posts.title,
                posts.created_time,
                string_agg( posts_tags.tag_id::text, ',' ) as agg_tags
            FROM
                posts
                LEFT JOIN posts_tags ON( posts.id = posts_tags.post_id )
            WHERE
                posts.id = 580
            GROUP by posts.id;-- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------

                    -- Panasonic побудує в Японії ще одне &quot;місто майбутнього&quot;
                    SELECT
                        DISTINCT posts.id,
                        rank
                    FROM
                        posts
                        LEFT JOIN posts_tags ON( posts.id = posts_tags.post_id ),
                        ts_rank(posts.svector,websearch_to_tsquery('Panasonic')) as rank
                    WHERE
                        rank > 0
                        AND posts.id != 580
                        AND posts_tags.tag_id IN(3,7,8,12)
                    ORDER by rank DESC
                    OFFSET 0 LIMIT 10;
                -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------

                    -- Panasonic побудує в Японії ще одне &quot;місто майбутнього&quot;
                    SELECT
                        DISTINCT posts.id,
                        rank
                    FROM
                        posts
                        LEFT JOIN posts_tags ON( posts.id = posts_tags.post_id ),
                        ts_rank(posts.svector,websearch_to_tsquery('побудує')) as rank
                    WHERE
                        rank > 0
                        AND posts.id != 580
                        AND posts_tags.tag_id IN(3,7,8,12)
                    ORDER by rank DESC
                    OFFSET 0 LIMIT 10;
                -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------

                    -- Panasonic побудує в Японії ще одне &quot;місто майбутнього&quot;
                    SELECT
                        DISTINCT posts.id,
                        rank
                    FROM
                        posts
                        LEFT JOIN posts_tags ON( posts.id = posts_tags.post_id ),
                        ts_rank(posts.svector,websearch_to_tsquery('Японії')) as rank
                    WHERE
                        rank > 0
                        AND posts.id != 580
                        AND posts_tags.tag_id IN(3,7,8,12)
                    ORDER by rank DESC
                    OFFSET 0 LIMIT 10;
                -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------

                    -- Panasonic побудує в Японії ще одне &quot;місто майбутнього&quot;
                    SELECT
                        DISTINCT posts.id,
                        rank
                    FROM
                        posts
                        LEFT JOIN posts_tags ON( posts.id = posts_tags.post_id ),
                        ts_rank(posts.svector,websearch_to_tsquery('&quot;місто')) as rank
                    WHERE
                        rank > 0
                        AND posts.id != 580
                        AND posts_tags.tag_id IN(3,7,8,12)
                    ORDER by rank DESC
                    OFFSET 0 LIMIT 10;
                -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------

                    -- Panasonic побудує в Японії ще одне &quot;місто майбутнього&quot;
                    SELECT
                        DISTINCT posts.id,
                        rank
                    FROM
                        posts
                        LEFT JOIN posts_tags ON( posts.id = posts_tags.post_id ),
                        ts_rank(posts.svector,websearch_to_tsquery('майбутнього&quot;')) as rank
                    WHERE
                        rank > 0
                        AND posts.id != 580
                        AND posts_tags.tag_id IN(3,7,8,12)
                    ORDER by rank DESC
                    OFFSET 0 LIMIT 10;
                -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 340 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 340 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (340) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 428 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 428 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (428) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 451 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 451 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (451) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 347 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 347 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (347) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 33 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.id = 33 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:19:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (33) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:20:
--------------------------------
INSERT INTO visit_counter ( ua_hash, ip, browser ) VALUES ( '1a0d36373ed7a1d578ee56dab756da62', '66.249.65.146'::inet, 'Chrome' );
--------------------------------
2019.11.23 19:15:20:
--------------------------------

                SELECT
                    tags.id,
                    tags.name,
                    tags.altname,
                    (SELECT count(posts_tags.post_id) FROM posts_tags WHERE posts_tags.tag_id = tags.id ) as news_count
                FROM
                    tags WHERE id > 0 ORDER BY name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:20:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.posted = 1 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:21:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.posted = 1 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 0 LIMIT 10000;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:21:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (634,633,632,631,630,629,628,627,626,625,624,623,622,621,620,619,618,617,616,615,614,613,612,611,610,609,608,607,606,605,604,603,602,601,600,599,598,597,596,595,594,593,592,591,590,589,588,587,586,585,584,583,582,581,580,579,578,577,576,575,574,573,572,571,570,569,568,567,566,565,564,563,562,561,560,559,558,557,556,555,554,553,552,551,550,549,548,547,546,545,544,543,542,541,540,539,538,537,536,535,534,533,532,531,530,529,528,527,526,525,524,523,522,521,520,519,518,517,516,515,514,513,512,511,510,509,508,507,506,505,504,503,502,501,500,499,498,497,496,495,494,493,492,491,490,489,488,487,486,485,484,483,482,481,480,479,478,477,476,475,474,473,472,471,470,469,468,467,466,465,464,463,462,461,460,459,458,457,456,455,454,453,452,451,450,449,448,447,446,445,444,443,442,441,440,439,438,437,436,435,434,433,432,431,430,429,428,427,426,425,424,423,422,421,420,419,418,417,416,415,414,413,412,411,410,409,408,407,406,405,404,403,402,401,400,399,398,397,396,395,394,393,392,391,390,389,388,387,386,385,384,383,382,381,380,379,378,377,376,375,374,373,372,371,370,369,368,367,366,365,364,363,362,361,360,359,358,357,356,355,354,353,352,351,350,349,348,347,346,345,344,343,342,341,340,339,338,337,336,335,334,333,332,331,330,329,328,327,326,325,324,323,322,321,320,319,318,317,316,315,314,313,312,311,310,309,308,307,306,305,304,303,302,301,300,299,298,297,296,295,294,293,292,291,290,289,288,287,286,285,284,283,282,281,280,279,278,277,276,275,274,273,272,271,270,269,268,267,266,265,264,263,262,261,260,259,258,257,256,255,254,253,252,251,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,234,233,232,231,230,229,228,227,226,225,224,223,222,221,220,219,218,217,216,215,214,213,212,211,210,209,208,207,206,205,204,203,202,201,200,199,198,197,196,195,194,193,192,191,190,189,188,187,186,185,184,183,182,181,180,179,178,177,176,175,174,173,172,171,170,169,168,167,166,165,164,163,162,161,160,159,158,157,156,155,154,153,152,151,150,149,148,147,146,145,144,143,142,141,140,139,138,137,136,135,134,133,132,131,130,129,128,127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,103,102,101,100,99,98,97,96,95,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:21:
--------------------------------
SELECT 
 count( posts.id ) as count 
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.posted = 1 


-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:21:
--------------------------------
SELECT 
-- SELECT 
	DISTINCT posts.id as "post.id", 
	posts.title as "post.title", 
	posts.alt_title as "post.alt_title", 
	posts.descr as "post.descr", 
	posts.short_post as "post.short_post", 
	posts.author_id as "post.author_id", 
	posts.created_time as "post.created_time", 
	posts.keywords as "post.keywords", 
	posts.posted as "post.posted", 
	posts.fixed as "post.fixed", 
	posts.static as "post.static", 
	posts.full_post as "post.full_post", 
	posts.repost_tg as "post.repost_tg", 
	categ.id as "categ.id", 
	categ.altname as "categ.altname", 
	categ.name as "categ.name", 
	usr.login as "usr.login", 
	usr.email as "usr.email"
-- SELECT
FROM 
	posts
	LEFT JOIN categories as categ ON ( categ.id = posts.category )
	LEFT JOIN posts_tags as ptags ON ( ptags.post_id = posts.id AND ptags.tag_id > 0 )
	LEFT JOIN users as usr ON ( usr.id = posts.author_id )
WHERE 
	posts.id > 0 AND
	categ.id > 0 AND
	posts.created_time <= NOW() AND
	posts.posted = 1 
-- ORDER
ORDER BY posts.created_time DESC, posts.fixed DESC, posts.posted ASC 
-- ORDER
-- OFFSET
OFFSET 90 LIMIT 12;
-- OFFSET
-- %QUERY_CACHABLE
-- USER_ID: 0


--------------------------------
2019.11.23 19:15:21:
--------------------------------
SELECT tg.*, ptags.post_id FROM tags as tg LEFT JOIN posts_tags as ptags ON (tg.id = ptags.tag_id) WHERE tg.id > 0 AND ptags.post_id IN (544,543,542,541,540,539,538,537,536,535,534,533) ORDER by tg.name; -- %QUERY_CACHABLE
--------------------------------
2019.11.23 19:15:21:
--------------------------------
SELECT count( DISTINCT ua_hash ) as count FROM visit_counter WHERE date_trunc('day', ts) = date_trunc('day', now());
--------------------------------
2019.11.23 19:15:21:
--------------------------------

                SELECT
                    date_trunc('day', visit_counter.ts) as visit_day,
                    COUNT( DISTINCT visit_counter.ua_hash ) as count
                FROM
                    visit_counter
                WHERE
                    date_trunc('day', visit_counter.ts ) > date_trunc('day', NOW() - INTERVAL '1 week')
                GROUP BY visit_day
                ORDER BY visit_day;
            
--------------------------------
